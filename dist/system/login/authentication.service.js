define(["../services/module"],function(e){"use strict";function r(e,r,a,o,i,n){function c(t,a,o){var i={username:t,password:a};r({method:"POST",url:e.PX_PACKAGE+"system/login/login.cfc?method=login",params:i}).success(function(e){o(e)}).error(function(e,r,t,a){alert("Ops! Ocorreu um erro inesperado.\nPor favor contate o administrador do sistema!")})}function s(e,i){var n=t.encode(e+":"+i);o.globals={currentUser:{username:e,authdata:n}},r.defaults.headers.common.Authorization="Basic "+n,a.put("globals",o.globals)}function h(){o.globals={},a.remove("globals"),r.defaults.headers.common.Authorization="Basic "}var d={};return d.Login=c,d.SetCredentials=s,d.ClearCredentials=h,d}e.factory("AuthenticationService",r),r.$inject=["pxConfig","$http","$cookieStore","$rootScope","$timeout","UserService"];var t={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var r,t,a,o,i,n="",c="",s="",h=0;do r=e.charCodeAt(h++),t=e.charCodeAt(h++),c=e.charCodeAt(h++),a=r>>2,o=(3&r)<<4|t>>4,i=(15&t)<<2|c>>6,s=63&c,isNaN(t)?i=s=64:isNaN(c)&&(s=64),n=n+this.keyStr.charAt(a)+this.keyStr.charAt(o)+this.keyStr.charAt(i)+this.keyStr.charAt(s),r=t=c="",a=o=i=s="";while(h<e.length);return n},decode:function(e){var r,t,a,o,i,n="",c="",s="",h=0,d=/[^A-Za-z0-9\+\/\=]/g;d.exec(e)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do a=this.keyStr.indexOf(e.charAt(h++)),o=this.keyStr.indexOf(e.charAt(h++)),i=this.keyStr.indexOf(e.charAt(h++)),s=this.keyStr.indexOf(e.charAt(h++)),r=a<<2|o>>4,t=(15&o)<<4|i>>2,c=(3&i)<<6|s,n+=String.fromCharCode(r),64!==i&&(n+=String.fromCharCode(t)),64!==s&&(n+=String.fromCharCode(c)),r=t=c="",a=o=i=s="";while(h<e.length);return n}}});